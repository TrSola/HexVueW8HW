import{r as f,C as k,o as V,b as i,d,e as P,f as l,h as n,i as c,j as o,G as R,H as g,m as T,F as v}from"./index-OxGqQdSB.js";import{a as r}from"./axios-L6U4YIEh.js";import{a as x}from"./sweetAlertStore-rwbVkwMl.js";var _={VITE_APP_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_PATH:"aca101139",BASE_URL:"/HexVueW8HW/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const A=l("h2",null,"後台",-1),C={__name:"DashboardView",setup(E){const u=f(!1),s=k(),m=()=>{if(document.cookie.replace(/(?:(?:^|.*;\s*)WillyToken\s*=\s*([^;]*).*$)|^.*$/,"$1")){const{VITE_APP_URL:a}=_;r.post(`${a}/api/user/check`).then(e=>{e.data.success?u.value=!0:(alert("驗證失敗"),s.push("/login"))}).catch(e=>{alert(e.response.data.message),s.push("/login")})}else alert("請先登入"),s.push("/login")},p=()=>{const{VITE_APP_URL:t}=_;r.post(`${t}/logout`).then(()=>{x.showSuccessMsg("登出成功"),document.cookie="WillyToken=;expires=",s.push("/")}).catch(a=>{alert(a.response.data.message)})};return V(()=>{const t=document.cookie.replace(/(?:(?:^|.*;\s*)WillyToken\s*=\s*([^;]*).*$)|^.*$/,"$1");r.defaults.headers.common.Authorization=t,m()}),(t,a)=>{const e=i("RouterLink"),h=i("RouterView");return d(),P(v,null,[A,l("nav",null,[n(e,{to:"/"},{default:c(()=>[o("回到前台")]),_:1}),o(" | "),n(e,{to:"/admin/order"},{default:c(()=>[o("訂單頁面")]),_:1}),o(" | "),n(e,{to:"/admin/backProducts"},{default:c(()=>[o("產品管理頁面")]),_:1}),o(" | "),n(e,{to:"/admin/AdminCoupons"},{default:c(()=>[o("優惠券管理頁面")]),_:1}),o(" | "),l("a",{href:"#",onClick:R(p,["prevent"])},"登出")]),u.value?(d(),g(h,{key:0})):T("",!0)],64)}}};export{C as default};
